{"name":"Xke-kafka","tagline":"","body":"# Installation\r\n\r\n## Download et installation\r\n\r\nTélécharger la version  0.8.2.1 de Kafka [http://kafka.apache.org/downloads.html](http://kafka.apache.org/downloads.html) \r\n(Si vous voulez utiliser Scala avec Kafka assurez vous de prendre la version qui correspond à la version de Scala).\r\n\r\nDans un répertoire de travail (ex : ~/xke-kafka) \r\n\r\nExtraire la distribution de Kafka\r\n\r\n```\r\n$ tar xzf kafka_2.10-0.8.2.1.tgz\r\n```\r\n\r\nCréer deux répertoires qui contiendront les logs des différents brokers de Kafka :\r\n\r\n```\r\n$ mkdir log1\r\n$ mkdir log2\r\n```\r\n\r\n\r\n### Démarrer Zookeeper\r\n\r\nKafka contient sa propre distribution de Zookeeper (pour les tests et les demos, NE PAS UTILISER EN PROD)\r\n\r\nDémarrer Zookeeper :\r\n\r\n    ./bin/zookeeper-server-start.sh config/zookeeper.properties &\r\n\r\n## Démarrer un broker\r\n\r\nEditer le fichier de configuration de Kafka config/server.properties et modifier la valeur de log.dirs :\r\n\r\n    log.dirs=~/xke-kafka/log1\r\n\r\nDémarrer le broker :\r\n\r\n    ./bin/kafka-server-start.sh config/server.properties &\r\n\r\n## Démarrer un second broker\r\n\r\nCopier le fichier de configuration de Kafka\r\n\r\n    cp config/server.properties config/server2.properties\r\n\r\nDans la configuration du second broker (config/server2.properties), modifier les valeurs de broker.id, \r\nport et log.dirs :\r\n\r\n    broker.id=1\r\n    port=9091\r\n    log.dirs=~/xke-kafka/log2\r\n\r\nDémarrer le second broker :\r\n\r\n    ./bin/kafka-server-start.sh config/server2.properties &\r\n\r\n## Créer une topic\r\n\r\nKafka propose un utilitaire pour la gestion des topics. \r\nLancer le pour découvrir ses options : \r\n\r\n    ./bin/kafka-topics.sh\r\n\r\nPuis démarrer la topic first : \r\n\r\n    ./bin/kafka-topics.sh --create \\\r\n      --zookeeper localhost:2181 \\\r\n      --replication-factor 2 \\\r\n      --partitions 2 \\\r\n      --topic first\r\n\r\nVerifier les partitions de cette topic :\r\n\r\n    ./bin/kafka-topics.sh --zookeeper localhost:2181 --describe --topic first\r\n\r\n## Valider la configuration avec le console-producer et le console-consumer\r\n\r\nDans un nouveau terminal, créer un producer kafka qui enverra dans la topic tous messages écrits dans la console :\r\n\r\n    ./bin/kafka-console-producer.sh --broker-list localhost:9092 --topic first\r\n\r\nDans un autre terminal, lancer un consommateur kafka qui affichera dans la console tous les messages d'une topic :\r\n\r\n    ./bin/kafka-console-consumer.sh --zookeeper localhost:2181 --topic first --from-beginning\r\n\r\nVérifier que tout marche bien.\r\n\r\n# Créer un Producer Kafka\r\n\r\n## Old producers\r\n\r\n- Sync -> Safe but slow\r\n- Async -> high performance but silent errors\r\n\r\n## New producers\r\n\r\n- can be use synchronously or asynchronously\r\n- both modes can handle errors\r\n- bounded memory usage\r\n- multi-threaded","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}